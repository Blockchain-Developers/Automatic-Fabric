(this["webpackJsonpauto-fabric"]=this["webpackJsonpauto-fabric"]||[]).push([[0],{106:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),o=r(40),c=r.n(o),l=(r(91),r(92),r(122)),u=r(116),i=r(114),m=r(115),g=r(11),s=r(107),p=r(108),f=r(109),d=r(110),E=r(111),b=r(112),h=r(113),v=r(123),O=function(e){return n.a.createElement(v.a,{color:"warning"},e.message)},y=function(e){return n.a.createElement(v.a,{color:"danger"},e.message)},_=r(10),j=r(31);function w(e){return{type:"SET_BAR_VAL",payload:e}}var S=r(7),k=S.c({orgcount:S.b().integer("must be a positive integer").positive("must be a positive integer").required("Required")}),N=Object(g.b)((function(e){return{orgcount:e.orgcount}}),(function(e){return{step1:function(){e(w(0))},update_org_num:function(t){e({type:"UPDATE_ORG_NUM",payload:t})}}}))((function(e){var t=Object(_.f)(),r=Object(j.a)({initialValues:{orgcount:e.orgcount},validationSchema:k,onSubmit:function(r){e.update_org_num(r.orgcount),t.push("/orgconfig")}});return Object(a.useEffect)((function(){e.step1()})),n.a.createElement(s.a,null,n.a.createElement(p.a,{onSubmit:r.handleSubmit},n.a.createElement(f.a,null,n.a.createElement("legend",null,"Input Number of orgs")),n.a.createElement(f.a,null,n.a.createElement(d.a,null,n.a.createElement(E.a,{for:"orgcount"},"Number of orgs"),n.a.createElement(b.a,Object.assign({type:"text",name:"orgcount"},r.getFieldProps("orgcount")))),r.touched.orgcount&&r.errors.orgcount&&n.a.createElement(y,{message:r.errors.orgcount})),n.a.createElement(f.a,null,n.a.createElement(h.a,{outline:!0,block:!0,size:"lg",color:"primary",tag:"button",type:"submit"},"Next"))))})),R=r(53),P=S.c({org:S.a().of(S.c({name:S.d().required("Required"),peercount:S.b().positive("must be a positive integer").integer("must be a positive integer").required("Required"),orderer:S.c({port:S.b().positive("must be a positive integer").integer("must be a positive integer").required("Required")})})).required("Required")}),A=function(e){var t=e.orgOrder,r=e.formik;return n.a.createElement(f.a,null,n.a.createElement(d.a,null,n.a.createElement(i.a,null,n.a.createElement(m.a,null,n.a.createElement(E.a,{for:"org[".concat(t,"].name")},"Org",t," Name"),n.a.createElement(b.a,Object.assign({type:"text",name:"org[".concat(t,"].name")},r.getFieldProps("org[".concat(t,"].name")))),r.touched.org&&r.touched.org[t]&&r.touched.org[t].name&&r.errors.org&&r.errors.org[t]&&r.errors.org[t].name&&n.a.createElement(y,{message:r.errors.org[t].name}))),n.a.createElement(i.a,null,n.a.createElement(m.a,null,n.a.createElement(E.a,{for:"org[".concat(t,"].peercount")},"Number of Peers of Org",t),n.a.createElement(b.a,Object.assign({type:"text",name:"org[".concat(t,"].peercount")},r.getFieldProps("org[".concat(t,"].peercount")))),r.touched.org&&r.touched.org[t]&&r.touched.org[t].peercount&&r.errors.org&&r.errors.org[t]&&r.errors.org[t].peercount&&n.a.createElement(y,{message:r.errors.org[t].peercount}))),n.a.createElement(i.a,null,n.a.createElement(m.a,null,n.a.createElement(E.a,{for:"org[".concat(t,"].orderer.port")},"Orderer Port of Org",t),n.a.createElement(b.a,Object.assign({type:"text",name:"org[".concat(t,"].orderer.port")},r.getFieldProps("org[".concat(t,"].orderer.port")))),r.touched.org&&r.touched.org[t]&&r.touched.org[t].orderer&&r.errors.org&&r.errors.org[t]&&r.errors.org[t].orderer&&n.a.createElement(y,{message:r.errors.org[t].orderer.port})))))},x=Object(g.b)((function(e){return{orgcount:e.orgcount,org:e.org}}),(function(e){return{step2:function(){e(w(25))},update_org_info:function(t){e({type:"UPDATE_ORG_INFO",payload:t})}}}))((function(e){var t=Object(_.f)();if(0===e.orgcount)return t.replace("/"),n.a.createElement("div",null,"redirecting...");var r={org:[]};if(e.org)r.org=e.org;else for(var o=0;o<e.orgcount;o++)r.org.push({name:"",peercount:"",orderer:{port:""}});var c=Object(j.a)({initialValues:r,validationSchema:P,onSubmit:function(r){e.update_org_info(r.org),t.push("/orglist")}});Object(a.useEffect)((function(){e.step2()}));for(var l=[],g=0;g<e.orgcount;g++)l.push(n.a.createElement(A,{key:g,orgOrder:g,formik:c}));return n.a.createElement(u.a,{fluid:!0},n.a.createElement(p.a,{onSubmit:c.handleSubmit},n.a.createElement(s.a,null,n.a.createElement(i.a,null,n.a.createElement(m.a,null,n.a.createElement(s.a,null,n.a.createElement(f.a,null,n.a.createElement("legend",null,"Input Org config")),l))),n.a.createElement(i.a,null,n.a.createElement(m.a,null,n.a.createElement(f.a,null,n.a.createElement(h.a,{outline:!0,block:!0,size:"lg",color:"primary",tag:"button",type:"submit"},"Next")))))))})),q=S.c({peer:S.a().of(S.c({name:S.d().required("Required"),port:S.b().positive().integer().required("please input a positive integer")})).required("Required")}),T=Object(g.b)((function(e){return{org:e.org}}),(function(e){return{step3:function(){return e(w(50))},update_peer_info:function(t){return e({type:"UPDATE_PEER_INFO",payload:t})},fill_org:function(t){return e({type:"FILL_ORG",payload:t})}}}))((function(e){var t=Object(_.f)();if(!e.org||0===e.org.length)return t.replace("/"),n.a.createElement("div",null,"redirecting...");Object(a.useEffect)((function(){e.step3()}));for(var r={peer:[]},o=Object(_.g)().orgid,c=o,l=0;l<e.org[o].peercount;l++)r.peer.push({name:e.org[o].peer&&e.org[o].peer[l]?e.org[o].peer[l].name:"",port:e.org[o].peer&&e.org[o].peer[l]?e.org[o].peer[l].port:""});for(var g=Object(j.a)({initialValues:r,validationSchema:q,onSubmit:function(r){e.update_peer_info({peer:r.peer,orgid:o}),e.fill_org(o),t.push("/orglist")}}),v=[],y=0;y<e.org[c].peercount;y++)v.push(n.a.createElement(f.a,{key:y},n.a.createElement(d.a,null,n.a.createElement(E.a,{for:"peer[".concat(y,"].name")},"name for peer",y),n.a.createElement(b.a,Object.assign({type:"text",name:"peer[".concat(y,"].name")},g.getFieldProps("peer[".concat(y,"].name"))))),n.a.createElement(d.a,null,n.a.createElement(E.a,{for:"peer[".concat(y,"].port")},"port of peer",y),n.a.createElement(b.a,Object.assign({type:"text",name:"peer[".concat(y,"].port")},g.getFieldProps("peer[".concat(y,"].port")))))));for(var w=!0,S=0;S<e.org[o].peercount;S++)if((!g.touched.peer||!g.touched.peer[S]||g.errors.peer)&&!e.org[o].peer){w=!1;break}return n.a.createElement(u.a,null,n.a.createElement(i.a,null,n.a.createElement(m.a,null,n.a.createElement(p.a,{onSubmit:g.handleSubmit},n.a.createElement(s.a,null,n.a.createElement(f.a,null,n.a.createElement("legend",null,"Input config for ".concat(e.org[c].name))),v,n.a.createElement(f.a,null,n.a.createElement(h.a,{disabled:!w,outline:!0,block:!0,size:"lg",color:w?"primary":"secondary",tag:"button",type:"submit"},"Next"),!w&&g.touched.peer&&n.a.createElement(O,{message:"some inputs are invalid or empty"})))))))})),F=S.c({ca:S.a().of(S.c({name:S.d().required("Required"),port:S.b().positive("must be a positive integer").integer("must be a positive integer").required("Required")})).required("Required")}),I=function(e){var t=e.caOrder,r=e.formik;return n.a.createElement(f.a,null,n.a.createElement(d.a,null,n.a.createElement(i.a,null,n.a.createElement(m.a,null,n.a.createElement(E.a,{for:"ca[".concat(t,"].name")},"ca",t," Name"),n.a.createElement(b.a,Object.assign({type:"text",name:"ca[".concat(t,"].name")},r.getFieldProps("ca[".concat(t,"].name")))),r.touched.ca&&r.touched.ca[t]&&r.touched.ca[t].name&&r.errors.ca&&r.errors.ca[t]&&r.errors.ca[t].name&&n.a.createElement(y,{message:r.errors.ca[t].name}))),n.a.createElement(i.a,null,n.a.createElement(m.a,null,n.a.createElement(E.a,{for:"ca[".concat(t,"].port")},"Port of ca",t),n.a.createElement(b.a,Object.assign({type:"text",name:"ca[".concat(t,"].port")},r.getFieldProps("ca[".concat(t,"].port")))),r.touched.ca&&r.touched.ca[t]&&r.touched.ca[t].port&&r.errors.ca&&r.errors.ca[t]&&r.errors.ca[t].port&&n.a.createElement(y,{message:r.errors.ca[t].port})))))},U=Object(g.b)((function(e){return{cacount:e.cacount,ca:e.ca}}),(function(e){return{step3:function(){e(w(75))},update_ca_info:function(t){e({type:"UPDATE_CA_INFO\b\b",payload:t})}}}))((function(e){var t=Object(_.f)();if(0===e.cacount)return t.replace("/"),n.a.createElement("div",null,"redirecting...");var r={ca:[]};if(e.ca)r.ca=e.ca;else for(var o=0;o<e.cacount;o++)r.ca.push({name:"",port:""});var c=Object(j.a)({initialValues:r,validationSchema:F,onSubmit:function(r){e.update_ca_info(r.ca),t.push("/submit")}});Object(a.useEffect)((function(){e.step3()}));for(var l=[],g=0;g<e.cacount;g++)l.push(n.a.createElement(I,{key:g,caOrder:g,formik:c}));return n.a.createElement(u.a,{fluid:!0},n.a.createElement(p.a,{onSubmit:c.handleSubmit},n.a.createElement(s.a,null,n.a.createElement(i.a,null,n.a.createElement(m.a,null,n.a.createElement(s.a,null,n.a.createElement(f.a,null,n.a.createElement("legend",null,"Enter Ca configs")),l))),n.a.createElement(i.a,null,n.a.createElement(m.a,null,n.a.createElement(f.a,null,n.a.createElement(h.a,{outline:!0,block:!0,size:"lg",color:"primary",tag:"button",type:"submit"},"Next")))))))})),D=r(85),L=r(117),V=Object(g.b)((function(e){return{org:e.org,ca:e.ca,cacount:e.cacount,orgcount:e.orgcount}}),(function(e){return{step4:function(){e(w(100))}}}))((function(e){var t=Object(_.f)();if(0===e.org.length||0===e.ca.length)return t.replace("/"),n.a.createElement("div",null,"redirecting...");var r={org:e.org,ca:e.ca,cacount:e.cacount,orgcount:e.orgcount},o=Object(a.useState)(!1),c=Object(D.a)(o,2),l=c[0],i=c[1];return Object(a.useEffect)((function(){e.step4()})),n.a.createElement(u.a,null,n.a.createElement(p.a,null,n.a.createElement(s.a,null,n.a.createElement(f.a,null,n.a.createElement("legend",null,"This is your input data")),n.a.createElement(f.a,null,n.a.createElement("pre",null,JSON.stringify(r,null,2))),n.a.createElement(f.a,null,n.a.createElement(h.a,{outline:!0,block:!0,size:"lg",color:"primary",onClick:function(){i(!0),fetch("/getconfig",{body:JSON.stringify(r),headers:{"content-type":"application/json"},method:"POST",redirect:"follow"}).then((function(e){return i(!1),e.json()})).then((function(e){window.location.href=e.path}))}},l?n.a.createElement(L.a,{color:"primary"}):"Are you sure you want to submit ?")))))})),C=r(118),z=r(119),W=r(120),G=r(121),J=Object(g.b)((function(e){return{filled:function(t){return e.filled_org[t]}}}),null)((function(e){var t=Object(_.f)();return n.a.createElement(C.a,{style:{margin:"1em"}},n.a.createElement(z.a,{tag:h.a,outline:!0,color:e.filled(e.orgid)?"info":"danger",onClick:function(){t.push("/peerconfig/".concat(e.orgid))}},n.a.createElement(W.a,null,n.a.createElement("h1",null,e.org.name)),n.a.createElement(G.a,null,"peers:",n.a.createElement("br",null),e.org.peercount),n.a.createElement(G.a,null,"orderer port:",n.a.createElement("br",null),e.org.orderer.port)))})),B=function(e){for(var t=e.orgcount,r=[],a=0;a<t;a++)r.push(n.a.createElement(m.a,{sm:"12",lg:"6",key:a},n.a.createElement(J,{org:e.org[a],orgid:a})));return r},X=Object(g.b)((function(e){return{orgcount:e.orgcount,org:e.org,currentState:e.filled_org}}),null)((function(e){var t=Object(_.f)();if(!e.org||0===e.orgcount)return t.replace("/orgconfig"),n.a.createElement("div",null,"redirecting...");for(var r=e.currentState,a=!0,o=0;o<e.orgcount;o++)if(!1===r[o]){a=!1;break}return n.a.createElement(u.a,null,n.a.createElement(i.a,null,n.a.createElement(B,{orgcount:e.orgcount,org:e.org})),n.a.createElement(i.a,null,n.a.createElement(m.a,null,n.a.createElement(h.a,{block:!0,size:"lg",color:a?"primary":"secondary",outline:!0,disabled:!a,onClick:function(){t.push("/caconfig")}},"Next"))))}));var M=Object(g.b)((function(e){return{barVal:e.barvalue}}),null)((function(e){return n.a.createElement(R.a,null,n.a.createElement(l.a,{value:e.barVal}),n.a.createElement(u.a,null,n.a.createElement(i.a,{style:{padding:"2em"}},n.a.createElement(m.a,{lg:{size:8,offset:2},md:"12",style:{textAlign:"center"}},n.a.createElement("h1",null,n.a.createElement(R.b,{to:"/",style:{textDecoration:"none",color:"black"}},"Automatic yaml config generator")))),n.a.createElement(i.a,null,n.a.createElement(m.a,{md:"12",lg:{size:6,offset:3}},n.a.createElement(_.c,null,n.a.createElement(_.a,{exact:!0,path:"/",component:N}),n.a.createElement(_.a,{exact:!0,path:"/orgconfig",component:x}),n.a.createElement(_.a,{path:"/peerconfig/:orgid",component:T}),n.a.createElement(_.a,{exact:!0,path:"/caconfig",component:U}),n.a.createElement(_.a,{exact:!0,path:"/submit",component:V}),n.a.createElement(_.a,{exact:!0,path:"/orglist",component:X}))))))})),$=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function H(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var r=e.installing;null!=r&&(r.onstatechange=function(){"installed"===r.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}r(105);var K=r(57),Q=r(39),Y={orgcount:0,org:[],cacount:0,ca:[],barvalue:0,filled_org:[]};var Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_ORG_NUM":return Object(Q.a)({},e,{orgcount:t.payload,cacount:t.payload,filled_org:Array(parseInt(t.payload)).fill(!1,0,t.payload)});case"UPDATE_ORG_INFO":return Object(Q.a)({},e,{org:t.payload});case"UPDATE_PEER_INFO":var r=JSON.parse(JSON.stringify(e.org));return r[t.payload.orgid].peer=t.payload.peer,Object(Q.a)({},e,{org:r});case"UPDATE_CA_INFO\b\b":return Object(Q.a)({},e,{ca:t.payload});case"SET_BAR_VAL":return Object(Q.a)({},e,{barvalue:t.payload});case"FILL_ORG":return Object(Q.a)({},e,{filled_org:e.filled_org.map((function(e,r){return r===parseInt(t.payload)||e}))});default:return e}},ee=Object(K.b)(Z,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());c.a.render(n.a.createElement(g.a,{store:ee},n.a.createElement(M,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");$?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(r){var a=r.headers.get("content-type");404===r.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):H(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):H(t,e)}))}}()},86:function(e,t,r){e.exports=r(106)},91:function(e,t,r){},92:function(e,t,r){}},[[86,1,2]]]);
//# sourceMappingURL=main.f153d32e.chunk.js.map